(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{16:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),o=n(7),s=n.n(o),i=(n(16),n(9)),l=n(3),u=n(4),h=n(6),d=n(5),m=(n(17),n(10)),j=n.n(m),p=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleRequest=function(t){e.setState({search:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault();var n=e.state.search;e.props.onChangeForm(n)},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsx)("header",{className:"Searchbar",children:Object(a.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(a.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(a.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(a.jsx)("input",{className:"SearchForm-input",type:"text",placeholder:"Search images and photos",onChange:this.handleRequest})]})})}}]),n}(r.Component),b=function(e){var t=e.children;return Object(a.jsx)("ul",{className:"ImageGallery",children:t})},g=document.querySelector("#modal-root"),O=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onCloseModal()},e.handleOnBackdropClick=function(t){t.currentTarget===t.target&&e.props.onCloseModal()},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.children;return Object(o.createPortal)(Object(a.jsx)("div",{className:"Overlay",onClick:this.handleOnBackdropClick,children:Object(a.jsx)("div",{className:"Modal",children:e})}),g)}}]),n}(r.Component),f=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={modalWindowImage:null,alt:null},e.showModal=function(t,n){e.setState({modalWindowImage:t,alt:n})},e.onCloseModal=function(){e.setState({modalWindowImage:null,alt:null})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.modalWindowImage,r=t.alt,c=this.props.images;return Object(a.jsxs)(a.Fragment,{children:[c.map((function(t){var n=t.id,r=t.largeImageURL,c=t.tags,o=t.webformatURL;return Object(a.jsx)("li",{className:"ImageGalleryItem",onClick:function(){return e.showModal(r,c)},children:Object(a.jsx)("img",{src:o,alt:c,className:"ImageGalleryItem-image"})},n)})),n&&Object(a.jsx)(O,{onCloseModal:this.onCloseModal,children:Object(a.jsx)("img",{src:n,alt:r})})]})}}]),n}(r.Component),v=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.props.onClick;return Object(a.jsx)("button",{type:"buttton",className:"Button",onClick:e,children:"Load more"})}}]),n}(r.Component),y=function(e){var t=e.searchQuery,n=void 0===t?"":t,a=e.currentPage,r=void 0===a?1:a,c=e.perPage,o=void 0===c?10:c;return fetch("".concat("https://pixabay.com/api/","?q=").concat(n,"&page=").concat(r,"&key=").concat("18518367-60788b25c9bdd8e2c754a390a","&image_type=photo&orientation=horizontal&per_page=").concat(o)).then((function(e){return e.ok?e.json():Promise.reject(new Error("Your query about ".concat(n," is not found")))}))},w=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:"",images:[],currentPage:1,error:null,status:"idle"},e.onChangeQuery=function(t){e.setState({searchQuery:t,currentPage:1,images:[],error:null})},e.fetchImages=function(){var t=e.state,n={currentPage:t.currentPage,searchQuery:t.searchQuery};e.setState({status:"pending"}),y(n).then((function(t){var n=t.hits;return e.setState((function(e){if(n.length>0)return{images:[].concat(Object(i.a)(e.images),Object(i.a)(n)),currentPage:e.currentPage+1,status:"resolved"}}))})).catch((function(t){return e.setState({error:t,status:"rejected"})}))},e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t){t.searchQuery!==this.state.searchQuery&&this.fetchImages()}},{key:"render",value:function(){var e=this.state,t=e.images,n=e.error,r=e.status;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p,{onChangeForm:this.onChangeQuery}),"resolved"===r&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b,{children:Object(a.jsx)(f,{images:t})}),Object(a.jsx)(v,{onClick:this.fetchImages})]}),"pending"===r&&Object(a.jsx)("div",{className:"Loader-wrapper",children:Object(a.jsx)(j.a,{type:"TailSpin",color:"#00BFFF",height:120,width:120,timeout:3e3})}),"rejected"===r&&Object(a.jsx)("p",{children:n.message})]})}}]),n}(r.Component);s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(w,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c9caf5dc.chunk.js.map